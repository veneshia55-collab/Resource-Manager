너는 “LiBu(리버) PoC”를 Replit에서 즉시 실행 가능한 Streamlit 앱으로 구현하는 시니어 풀스택 엔지니어다.
목표는 ‘중·고등학생 미디어 리터러시 학습을 지원하는 LiBu(리버) 대화형 기능’ 중심의 PoC를 만드는 것이다.

[핵심 변경 요구(반드시 준수)]
1) Tab A~F는 “사용자 입력 내용”에 대해 **정보 검색(웹 검색/지식 검색)을 수행한 뒤**, 그 근거를 바탕으로 **논리적으로 답변**해야 한다.
   - 각 탭의 출력은 반드시 아래 구조를 따른다:
     (1) 검색 결과(출처 카드 3~5개) → (2) 근거 요약(핵심 근거 bullet) → (3) LiBu 답변(논리적 결론) → (4) 참고 링크 목록
   - 단, 외부 검색이 실패하거나 인터넷이 막힌 경우에도 동작해야 하므로 “오프라인 대체 로직(템플릿/규칙 기반)”을 반드시 포함한다.
2) Tab G(Records & Report)는 **Tab A~F에서 남긴 기록(records)**만을 기반으로 결과값(점수/리포트/시각화)을 도출한다.
   - Tab G에서 새롭게 외부 검색을 수행하지 않는다(기록 기반 집계만).

[탭 구성(최종)]
- Tab A: 어휘 지원(검색 기반 정의/동의어/쉬운 문장 + 퀴즈)
- Tab B: 사실·요약적 이해 지원(검색 기반 근거/요약 비교/오류 가능성)
- Tab C: 추론적 이해 지원(검색 기반 배경지식/단서 질문/관련 링크)
- Tab D: 비판적 이해 지원(토론/논박: 검색 기반 찬반 근거)
- Tab E: 통합적 이해 지원(마인드맵: 검색 기반 핵심 개념 확장)
- Tab F: 정보 안전성 검증(검색 기반 출처/전문성/정확성/확장성 평가)
- Tab G: Records & Report(기록 기반 집계/진단/다운로드)

[공통 UI/UX 요구(필수)]
- 사이드바에 “학습 대상 콘텐츠” 입력 섹션:
  1) 콘텐츠 제목
  2) 콘텐츠 유형(뉴스/유튜브/숏폼/SNS/커뮤니티/광고 등)
  3) 원문 텍스트 붙여넣기(필수)
  4) 참고 URL(선택: 크롤링 금지, 저장/표시만)
  5) “기록 시작(Start)” 버튼: active_content를 세션에 저장
  * active_content가 없으면 Tab A~F 실행 불가 + 안내 메시지
- 각 탭은 “입력(Input)”과 “출력(Output)”을 명확히 분리(헤더/박스)
- 절차는 단순: Start → (탭에서 실행 버튼 1회) → 결과 확인 → Tab G 리포트
- 최소 4종 이상 시각화 포함(막대/게이지/레이더/마인드맵 등)

[정보 검색(웹 검색) 구현 지시 — 반드시 구현]
- 기본 검색 방식(권장): duckduckgo_search 패키지로 웹 검색 후 상위 5개 결과를 사용
  - requirements.txt에 duckduckgo_search 추가
  - 각 결과는 {title, snippet, url} 형태로 저장 및 출력
- 보조 검색(폴백): Wikipedia API(키워드 검색 및 요약)로 1~2개 보강
- 검색 쿼리 생성 규칙:
  - 사용자 입력(단어/요약/주장) + 콘텐츠 제목 + 핵심 키워드(자동 추출 3개)를 결합하여 쿼리 구성
  - 예: “(키워드) meaning definition”, “(주장) evidence pro con”, “(개념) background”
- “검색 실패/차단” 시:
  - 오프라인 대체 응답(템플릿/규칙)으로 출력하되, “검색 불가” 안내 메시지 표시
- 출력에서 출처 표기:
  - 검색 결과 카드(제목/스니펫/클릭 링크)
  - LiBu 답변에 각 근거를 [1], [2]처럼 번호로 연결
  - “참고 링크” 섹션에 URL 목록 제공

[필수: 더미데이터 생성 버튼]
- 사이드바 또는 상단에 “더미데이터 생성” 버튼 제공
- 클릭 시 즉시 300행 이상 더미데이터 생성 → 세션 저장
- 상위 20행 미리보기 + CSV 다운로드
- 더미데이터는 기록/리포트 집계용(학생군/학년 필터 등)에 사용 가능

[세션 상태 설계(구현 지시 — 고정)]
- st.session_state 키:
  - data_df: 더미데이터 DataFrame
  - active_content: {title, type, text, urls, start_time}
  - records: list[dict]
    * record 공통 필드:
      - timestamp, tab_name, content_title, content_type
      - inputs (dict), search_queries (list), sources (list of {title,snippet,url})
      - outputs (dict), scores (dict), duration_sec

- Tab A~F의 “실행” 버튼은 반드시 records에 append한다.
- Tab G는 records만을 사용해 집계/시각화/리포트 생성한다(추가 검색 금지).

========================
[Tab A] 어휘 지원(검색 기반)
- 입력:
  - 어려운 단어/표현(복수)
  - 학년(중1~고3)
- 처리:
  - 각 단어에 대해 웹 검색으로 “정의/용례/동의어 힌트”를 수집
- 출력(반드시 구조 준수):
  1) 검색 결과 카드 3~5개
  2) 근거 요약(정의 핵심/문맥)
  3) LiBu 답변:
     - Step1 동의어 힌트
     - Step2 사전적 의미(짧은 정의)
     - Step3 쉬운 문장 번역(학년 수준 반영)
  4) 참고 링크
  + “오늘의 단어 OX 퀴즈 1문항(정답/해설)” 생성
- 시각화:
  - 단어 난이도(규칙 기반 점수) 막대
- 기록:
  - 단어별 결과/퀴즈/출처/점수/시간

========================
[Tab B] 사실·요약적 이해 지원(검색 기반 근거 확인)
- 입력:
  - 사용자의 요약
- 처리:
  - 원문에서 핵심 주장/사실 후보 3~5개 추출
  - 각 후보에 대해 웹 검색으로 근거/반박 가능 자료 수집
- 출력(구조 준수):
  1) 검색 결과 카드
  2) 근거 요약(지지/불확실/반박 가능으로 분류)
  3) LiBu 답변:
     - “근거 문장/키워드(원문)” 하이라이트 텍스트
     - “AI 요약”(검색 근거 반영)
     - “요약 비교 표”(공통점/누락/왜곡 가능성)
     - “교정을 위한 사고 발자국” 체크리스트
  4) 참고 링크
- 시각화:
  - 요약 갭 점수(0~100) 게이지/막대
- 기록:
  - 사용자 요약, AI 요약, 요약갭, 출처, 체크리스트, 시간

========================
[Tab C] 추론적 이해 지원(검색 기반 배경지식)
- 입력:
  - 사용자의 해석/추론(한 줄)
- 처리:
  - 핵심 개념 2~4개 추출 → 웹 검색으로 배경지식 요약 수집
- 출력(구조 준수):
  1) 검색 결과 카드
  2) 근거 요약(배경지식 핵심)
  3) LiBu 답변:
     - 단서 질문 3개
     - 배경지식 카드 2~3개(정의/짧은 설명)
     - 추가 정보 링크(사용자 입력 URL + 검색 URL)
  4) 참고 링크
- 시각화:
  - 추론 근거 충실도 점수(0~100) 막대
- 기록:
  - 질문/카드/점수/출처/시간

========================
[Tab D] 비판적 이해 지원(검색 기반 찬반 근거)
- 입력:
  - 사용자의 주장
  - (선택) 주제 라벨
- 처리:
  - 주장 핵심을 쿼리로 생성해 찬성/반대 근거 자료를 각각 검색
- 출력(구조 준수):
  1) 검색 결과 카드(찬성 근거/반대 근거 구분)
  2) 근거 요약(찬/반 각각 2~3개)
  3) LiBu 답변:
     - 반박 → 재반박 2턴(검색 근거를 [1][2]로 인용)
     - 관점 형성(찬/반/중립 1문장씩)
     - 정보 윤리 포인트 안내(템플릿 + 사례 연결)
  4) 참고 링크
- 시각화:
  - 관점 다양성 점수(0~100) + 윤리 체크(표/차트)
- 기록:
  - 주장/대화/관점/점수/출처/시간

========================
[Tab E] 통합적 이해 지원(마인드맵: 검색 기반 확장)
- 입력:
  - 중심 주제(기본: 콘텐츠 제목)
  - 강조 키워드(선택)
- 처리:
  - 원문/기록에서 핵심 개념 추출(8~12개)
  - 각 개념 중 2~3개는 웹 검색으로 “관련 개념/상위 개념”을 보강
- 출력(구조 준수):
  1) 검색 결과 카드(보강에 사용한 개념 중심)
  2) 근거 요약(개념 간 관계 힌트)
  3) LiBu 답변:
     - Graphviz 마인드맵(중심→가지→세부 노드)
     - 핵심 요약 5줄(마인드맵 해설)
  4) 참고 링크
- 기록:
  - 노드/엣지/이미지/출처/시간

========================
[Tab F] 정보 안전성 검증(검색 기반 평판/교차검증)
- 입력:
  - 평가 대상(기본: 현재 콘텐츠)
- 처리:
  - 웹 검색으로 출처/원자료/동일 주장 반복 여부/팩트체크 단서 등을 수집
  - 규칙 기반으로 항목 점수화:
    - 출처 명확성, 전문성, 정보 정확성, 정보 확장 가능성 (각 0~100) + 총점
- 출력(구조 준수):
  1) 검색 결과 카드
  2) 근거 요약(왜 점수가 그렇게 나왔는지)
  3) LiBu 답변:
     - 항목별 점수 + 설명
     - 총점 + 개선 가이드(무엇을 더 확인해야 하는지)
  4) 참고 링크
- 시각화:
  - 항목별 막대 + 총점 게이지/도넛
- 기록:
  - 점수/설명/출처/시간

========================
[Tab G] Records & Report (기록 기반 집계 — 검색 금지)
- 원칙:
  - records만 사용해 결과값을 도출한다(추가 검색/추가 생성 금지).
- 출력:
  1) 오늘의 학습 기록 타임라인(콘텐츠별/탭별/시간/핵심 점수)
  2) 종합 진단 레이더/막대:
     - 어휘력, 사실·요약 이해, 추론, 비판, 통합(마인드맵), 정보 안전성, 정보 윤리 태도
     - 점수 산출 규칙: records의 scores를 평균 또는 최신값으로 집계(명시)
  3) 진단 리포트:
     - 각 항목별 진단 문장 + 등급(중/우수/매우 우수) + 다음 솔루션 2~3개
     - 다운로드 버튼(Markdown/텍스트)
  4) 기록 초기화 버튼(세션 records 삭제)

[구현 제약]
- 파일 구조 단순: app.py, requirements.txt (+ 선택 utils.py)
- requirements 최소화(예: streamlit, pandas, numpy, scikit-learn, matplotlib, graphviz, duckduckgo_search, requests)
- 외부 크롤링 금지(사용자 URL은 저장/표시만)
- 예외 처리 필수:
  - active_content 없음 → 실행 불가 안내
  - 검색 실패 → 오프라인 대체 + 실패 안내
- 앱 상단에 간단 사용법 안내(“Start → 탭 실행 → Tab G 리포트”)

[산출물]
- app.py 전체 코드
- requirements.txt
- 앱 상단 실행/사용 안내

지금 위 요구사항을 만족하는 Streamlit 앱의 전체 코드를 생성하라.
